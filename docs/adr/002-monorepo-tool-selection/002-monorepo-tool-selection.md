# 모노레포 도구 선택: Turborepo

## 핵심 결정: pnpm + Turborepo

`my-commit` 프로젝트는 클라이언트(Web)와 서버(API)가 공존하는 모노레포 환경입니다.
이러한 환경에서 개발 생산성과 배포 속도를 최적화하기 위해 pnpm workspaces와 Turborepo를 함께 사용하기로 결정했습니다.

---

## 2가지 핵심 가치

Turborepo를 도입한 이유는 다음 두 가지 핵심 가치를 얻기 위함입니다.

| 가치                | 설명                        | 효과                                                           |
| :------------------ | :-------------------------- | :------------------------------------------------------------- |
| 정합성 (Validation) | "언제나 2를 수행할 수 있음" | 의존성 순서 보장 (예: `build` 전에 `packages/*` 먼저 빌드)     |
| 속도 (Speed)        | "2를 가속하는 3"            | 캐싱(Caching) 및 병렬 실행(Parallelization)으로 대기 시간 단축 |

---

## 비교 분석

### 1. vs Pure pnpm (Workspace only)

pnpm의 Workspace 기능만 사용할 경우와 비교입니다.

| 항목          | Pure pnpm                                                      | pnpm + Turborepo                              |
| :------------ | :------------------------------------------------------------- | :-------------------------------------------- |
| 의존성 설치   | 빠름 (Hard linking)                                            | 빠름 (pnpm 사용)                              |
| 스크립트 실행 | 순차적 실행만 가능하거나 별도 도구(`concurrently`) 필요        | 병렬 실행 지원 (Topology 분석 기반)           |
| 캐싱          | 없음 (매번 처음부터 빌드)                                      | 강력함 (변경된 부분만 빌드)                   |
| 결론          | 단순 패키지 연결에는 좋으나, 빌드/실행 속도 최적화 기능이 없음 | pnpm의 설치 속도 + Turborepo의 실행 속도 결합 |

Pure pnpm은 "패키지를 어떻게 저장하고 연결할지"를 잘 해결하지만, "작업을 어떻게 실행할지(Orchestration)"에 대한 솔루션은 아닙니다.

### 2. vs Other Tools (Nx, Lerna)

다른 모노레포 관리 도구들과의 비교입니다.

| 도구      | 특징                                        | 단점                            | `my-commit`에 적합하지 않은 이유                            |
| :-------- | :------------------------------------------ | :------------------------------ | :-------------------------------------------------------- |
| Lerna     | 전통적인 강자, 버전 관리/배포 중심          | 속도가 느리고 설정이 복잡함     | 최신 트렌드(캐싱, 병렬화)에서 Turborepo/Nx에 밀림         |
| Nx        | 엔터프라이즈급 기능, 강력한 플러그인 생태계 | 무겁고 복잡함, 학습 곡선이 높음 | 개인 프로젝트 규모에는 Over-engineering                   |
| Turborepo | 설정이 거의 없음(Zero-config), 가볍고 빠름  | 복잡한 플러그인 시스템 부재     | 설정이 쉽고 즉시 도입 가능, 필요한 기능(캐싱/병렬)만 제공 |

---

## Turborepo의 단점 및 한계

도입 시 고려했던 Turborepo의 단점들과 이에 대한 대응책입니다.

1. 플러그인 생태계의 부재 (vs Nx)
   - Nx처럼 강력한 코드 생성(Generator)이나 다양한 언어 지원 플러그인이 부족합니다.
   - 대응: 현재 프로젝트는 대부분 TypeScript 기반이며, 복잡한 코드 생성이 필요하지 않아 큰 문제가 되지 않습니다.

2. 부족한 시각화 도구
   - 의존성 그래프 시각화 등이 가능은 하지만, 엔터프라이즈급 도구들에 비해 기능이 단순합니다.
   - 대응: 프로젝트 규모가 아직 작아 복잡한 시각화가 필수적이지 않습니다.

3. 버전 관리 기능 미포함
   - Lerna와 달리 패키지 버전 관리(Versioning)나 배포(Publishing) 기능이 내장되어 있지 않습니다.
   - 대응: `changesets`과 같은 별도 도구를 사용하여 버전 관리를 수행합니다.

---

## 결론

> "복잡한 설정 없이, 즉시 빨라지는 경험"

`my-commit`은 소규모 팀 또는 개인 프로젝트 규모이므로, 설정의 복잡도를 최소화하면서도 모노레포의 이점(캐싱, 병렬 빌드)을 누릴 수 있는 Turborepo가 가장 적합합니다.

- 패키지 매니저: `pnpm` (빠른 설치)
- 태스크 러너: `Turborepo` (빠른 실행, 캐싱, 의존성 제어)

이 조합을 통해 로컬 개발 시에는 빠른 피드백 루프를, CI/CD 환경에서는 빌드 시간을 단축하여 운영 비용을 절감합니다.
